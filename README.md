# Cursorを使ったJava開発プロジェクト

## 概要

本プロジェクトは、Cursor AIアシスタントを活用したJava開発プロセスの説明とサンプルを提供します。
詳細設計、実装、単体テスト、結合テスト、システムテストの各フェーズにおける作業方法をドキュメント化しています。

## プロジェクト構成

```
プロジェクトルート/
├── specification/                    # 仕様書・設計書
│   ├── 00_詳細設計書テンプレート.md
│   ├── 01_システム概要仕様書.md
│   ├── 02_機能仕様書.md
│   ├── 03_API仕様書.md
│   └── 04_データ仕様書.md
│
├── .cursor/rules/                   # Cursor開発ルール
│   ├── basic-development.md         # 基本開発ルール
│   ├── coding-standards.md          # コーディング規約
│   ├── layer-implementation.md      # レイヤー別実装ルール
│   ├── specification-writing.md     # 仕様書作成ルール
│   └── testing.md                   # テストルール
│
├── src/                             # ソースコード
├── test/                            # テストコード
├── test-docs/                       # テスト設計書
└── README.md                        # 本ファイル
```

## 技術スタック

- **言語**: Java 17以上
- **フレームワーク**: Spring Boot 3.x
- **ビルドツール**: Maven
- **データベース**: H2 Database（開発環境）
- **テストフレームワーク**: JUnit 5
- **モックライブラリ**: Mockito

## 開発フロー

```
1. 仕様書作成（specification/）
   ↓
2. 詳細設計書作成（specification/00_詳細設計書テンプレート.md を使用）
   ↓
3. 実装（.cursor/rules/ のルールに従って実装）
   ↓
4. 単体テスト作成・実行（.cursor/rules/testing.md に従う）
   ↓
5. 結合テスト作成・実行
   ↓
6. システムテスト作成・実行
   ↓
7. コードレビュー
   ↓
8. リリース
```

## Cursorを使った開発プロセス

### 1. 詳細設計フェーズ

#### 作業内容
- 要件定義書を基に詳細設計書を作成
- クラス設計、メソッド設計、データベース設計
- API設計（エンドポイント、リクエスト/レスポンス）

#### Cursorでの作業方法

**設計書の作成**
```
@specification/00_詳細設計書テンプレート.md を参照して、[機能名]の詳細設計書を作成してください
```

**クラス設計の支援**
```
以下の要件を満たすクラス設計を提案してください:
- [要件1]
- [要件2]
```

**API設計の支援**
```
RESTful APIのエンドポイント設計をしてください。
エンティティは[Entity名]で、CRUD操作が必要です。
```

#### 成果物
- 詳細設計書（`specification/`配下）
- クラス図（テキスト形式または画像）
- API仕様書

---

### 2. 実装フェーズ

#### 作業内容
- 詳細設計書に基づいてソースコードを実装
- `.cursor/rules/`のルールに従った実装
- コードレビュー準備

#### Cursorでの作業方法

**新規クラスの作成**
```
@specification/02_機能仕様書.md の[クラス名]を実装してください。
パッケージは com.company.system.[レイヤー] です。
```

**既存コードの拡張**
```
@src/main/java/com/company/system/service/EmployeeService.java に
[機能名]メソッドを追加してください。
```

**リファクタリング**
```
@src/main/java/com/company/system/controller/EmployeeController.java を
リファクタリングして、可読性を向上させてください。
```

**エラーハンドリングの追加**
```
例外処理を追加してください。
カスタム例外クラスを作成し、適切なエラーメッセージを返すようにしてください。
```

#### 実装時のベストプラクティス
- 仕様書・設計書を参照しながら実装
- `.cursor/rules/`のルールに従う
- 小さな単位で実装し、頻繁にコミット
- 実装前にCursorに設計の確認を依頼
- コードレビューを意識した実装

#### 成果物
- ソースコード（`src/main/java/`配下）
- 実装完了報告

---

### 3. 単体テストフェーズ

#### 作業内容
- JUnit 5を使用した単体テストの作成
- テストケースの設計と実装
- カバレッジの確認

#### Cursorでの作業方法

**テストクラスの作成**
```
@src/main/java/com/company/system/service/EmployeeService.java の
単体テストを作成してください。
JUnit 5とMockitoを使用してください。
```

**テストケースの追加**
```
@test/java/com/company/system/unit/EmployeeServiceTest.java に
以下のテストケースを追加してください:
- 正常系: 社員が正常に作成される
- 異常系: 重複するメールアドレスでエラー
```

**モックの設定**
```
Repositoryのモックを設定し、テストデータを返すようにしてください。
```

**カバレッジの向上**
```
テストカバレッジを向上させるために、不足しているテストケースを追加してください。
```

#### 成果物
- 単体テストコード（`test/java/unit/`配下）
- テスト実行結果
- カバレッジレポート

---

### 4. 結合テストフェーズ

#### 作業内容
- 複数クラス間の連携テスト
- データベースとの結合テスト
- 外部APIとの結合テスト

#### Cursorでの作業方法

**結合テストの作成**
```
EmployeeServiceとEmployeeRepositoryの結合テストを作成してください。
H2 Databaseを使用して、実際のデータベース操作をテストしてください。
```

**トランザクションテスト**
```
トランザクションのロールバックが正しく動作することを確認するテストを追加してください。
```

#### 成果物
- 結合テストコード（`test/java/integration/`配下）
- テスト実行結果

---

### 5. システムテストフェーズ

#### 作業内容
- エンドツーエンドのテスト
- 実際の環境での動作確認
- パフォーマンステスト

#### Cursorでの作業方法

**システムテストの作成**
```
REST APIのエンドツーエンドテストを作成してください。
Spring Boot Testを使用して、実際のアプリケーションを起動してテストしてください。
```

**テストシナリオの実装**
```
@test-docs/システムテスト設計書.md のシナリオを実装してください。
```

#### 成果物
- システムテストコード（`test/java/system/`配下）
- テスト実行結果
- パフォーマンスレポート

---

## Cursorの効果的な使い方

### コンテキストの提供
Cursorに作業を依頼する際は、関連するファイルやドキュメントを参照させることが重要です。

**良い例:**
```
@specification/02_機能仕様書.md と
@src/main/java/com/company/system/model/Employee.java を参照して、
EmployeeServiceを実装してください。
```

**悪い例:**
```
EmployeeServiceを実装してください。
```

### 段階的な実装
大きな機能は小さな単位に分割して実装します。

1. まず設計書を作成
2. モデルクラスを実装
3. リポジトリを実装
4. サービスを実装
5. コントローラーを実装
6. テストを実装

### コードレビューの依頼
実装後、Cursorにコードレビューを依頼できます。

```
@src/main/java/com/company/system/service/EmployeeService.java を
レビューしてください。改善点があれば指摘してください。
```

### ドキュメント生成
実装コードからJavaDocを自動生成できます。

```
@src/main/java/com/company/system/service/EmployeeService.java の
JavaDocコメントを追加してください。
```

---

## トラブルシューティング

### コンパイルエラー
```
@src/main/java/com/company/system/service/EmployeeService.java の
コンパイルエラーを修正してください。
```

### テスト失敗
```
@test/java/com/company/system/unit/EmployeeServiceTest.java の
テストが失敗しています。原因を特定して修正してください。
```

### パフォーマンス問題
```
@src/main/java/com/company/system/service/EmployeeService.java の
パフォーマンスを改善してください。
```

---

## チェックリスト

### 実装前
- [ ] 仕様書が完成している
- [ ] 詳細設計書が完成している
- [ ] 実装方針が明確になっている
- [ ] 必要な依存関係が確認できている

### 実装中
- [ ] `.cursor/rules/`のルールに従っている
- [ ] 適切な例外処理が実装されている
- [ ] ログ出力が適切に実装されている

### 実装後
- [ ] 単体テストがすべてパスしている
- [ ] コードレビューが完了している
- [ ] ドキュメントが更新されている

### テスト
- [ ] 単体テストカバレッジが80%以上
- [ ] 結合テストがすべてパスしている
- [ ] システムテストがすべてパスしている

---

## ドキュメント構成

### 仕様書・設計書（specification/）
- `00_詳細設計書テンプレート.md` - 詳細設計書のテンプレート
- `01_システム概要仕様書.md` - システム全体の概要
- `02_機能仕様書.md` - 各機能の詳細仕様
- `03_API仕様書.md` - REST APIの詳細仕様
- `04_データ仕様書.md` - データベース設計とデータ定義

### Cursor開発ルール（.cursor/rules/）
- `basic-development.md` - プロジェクト概要、アーキテクチャ原則、基本方針
- `coding-standards.md` - 命名規則、コーディングスタイル、コード品質
- `layer-implementation.md` - Controller、Service、Repository、Model、DTO層の実装ガイドライン
- `specification-writing.md` - 仕様書作成ルール
- `testing.md` - テストルール（JUnit 5とMockitoを使用した単体テスト）

### テスト設計書（test-docs/）
- `結合テスト設計書.md` - 結合テストの設計
- `システムテスト設計書.md` - システムテストの設計

---

## プロジェクトの使い方

1. **仕様書の確認**
   - `specification/`配下の仕様書を確認
   - システムの要件と機能を理解

2. **詳細設計書の作成**
   - `specification/00_詳細設計書テンプレート.md`を参照
   - Cursorを使用して詳細設計書を作成

3. **実装**
   - `.cursor/rules/`のルールに従って実装
   - Cursorを使用してコードを生成

4. **テストの実装**
   - `.cursor/rules/testing.md`のルールに従ってテストを実装
   - 単体テスト、結合テスト、システムテストを実装

---

## 注意事項

- 本プロジェクトは説明用のサンプルプロジェクトです
- 実際のプロジェクトでは、要件に応じて設計を調整してください
- Cursorの使い方は、プロジェクトの状況に応じて最適化してください

## 参考資料

- [Spring Boot公式ドキュメント](https://spring.io/projects/spring-boot)
- [JUnit 5公式ドキュメント](https://junit.org/junit5/)
- [Cursor公式ドキュメント](https://cursor.sh/docs)

## ライセンス

本プロジェクトは説明用のサンプルプロジェクトです。
